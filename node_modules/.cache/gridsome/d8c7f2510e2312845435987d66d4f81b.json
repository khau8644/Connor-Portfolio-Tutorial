{"remainingRequest":"/Users/Keegan/Desktop/mywebsite/node_modules/babel-loader/lib/index.js??ref--1-1!/Users/Keegan/Desktop/mywebsite/node_modules/gridsome/app/page-query/fetch.js","dependencies":[{"path":"/Users/Keegan/Desktop/mywebsite/node_modules/gridsome/app/page-query/fetch.js","mtime":499162500000},{"path":"/Users/Keegan/Desktop/mywebsite/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Keegan/Desktop/mywebsite/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.number.constructor\";\nimport _JSON$stringify from \"/Users/Keegan/Desktop/mywebsite/node_modules/@babel/runtime-corejs2/core-js/json/stringify\";\nimport _Promise from \"/Users/Keegan/Desktop/mywebsite/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport _objectSpread from \"/Users/Keegan/Desktop/mywebsite/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\nimport _objectWithoutProperties from \"/Users/Keegan/Desktop/mywebsite/node_modules/@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport \"core-js/modules/es6.regexp.constructor\";\n\n/* global GRIDSOME_MODE, GRIDSOME_DATA_DIR */\nimport cache from './cache';\nimport router from '../router';\nimport config from '~/.temp/config.js';\nimport { unslash } from '../utils/helpers';\nvar re = new RegExp(\"^\".concat(config.pathPrefix));\nexport default (function (route, query) {\n  if (GRIDSOME_MODE === 'serve') {\n    var _route$params = route.params,\n        page = _route$params.page,\n        params = _objectWithoutProperties(_route$params, [\"page\"]);\n\n    var _router$resolve = router.resolve(_objectSpread({}, route, {\n      params: params\n    })),\n        location = _router$resolve.location;\n\n    return new _Promise(function (resolve, reject) {\n      fetch(process.env.GRAPHQL_ENDPOINT, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: _JSON$stringify({\n          variables: {\n            page: page ? Number(page) : null,\n            path: location.path || route.path\n          },\n          query: query\n        })\n      }).then(function (res) {\n        return res.json();\n      }).then(function (res) {\n        if (res.errors) reject(res.errors[0]);else cache.set(route.path, res.data) && resolve(res);\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  } else if (GRIDSOME_MODE === 'static') {\n    return new _Promise(function (resolve, reject) {\n      var routePath = unslash(route.path.replace(re, '/'));\n      var filename = !routePath ? '/index.json' : \"/\".concat(routePath, \".json\");\n      import(\n      /* webpackChunkName: \"data/\" */\n      \"\".concat(GRIDSOME_DATA_DIR).concat(filename)).then(function (res) {\n        if (res.errors) reject(res.errors[0]);else cache.set(route.path, res.data) && resolve(res);\n      }).catch(function (err) {\n        reject(err);\n      });\n    });\n  }\n});",{"version":3,"sources":["/Users/Keegan/Desktop/mywebsite/node_modules/gridsome/app/page-query/fetch.js"],"names":["cache","router","config","unslash","re","RegExp","pathPrefix","route","query","GRIDSOME_MODE","params","page","resolve","location","reject","fetch","process","env","GRAPHQL_ENDPOINT","method","headers","body","variables","Number","path","then","res","json","errors","set","data","catch","err","routePath","replace","filename","GRIDSOME_DATA_DIR"],"mappings":";;;;;;;;AAAA;AAEA,OAAOA,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AAEA,IAAMC,EAAE,GAAG,IAAIC,MAAJ,YAAeH,MAAM,CAACI,UAAtB,EAAX;AAEA,gBAAe,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAC/B,MAAIC,aAAa,KAAK,OAAtB,EAA+B;AAAA,wBACDF,KAAK,CAACG,MADL;AAAA,QACrBC,IADqB,iBACrBA,IADqB;AAAA,QACZD,MADY;;AAAA,0BAERT,MAAM,CAACW,OAAP,mBAAoBL,KAApB;AAA2BG,MAAAA,MAAM,EAANA;AAA3B,OAFQ;AAAA,QAErBG,QAFqB,mBAErBA,QAFqB;;AAI7B,WAAO,aAAY,UAACD,OAAD,EAAUE,MAAV,EAAqB;AACtCC,MAAAA,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,gBAAb,EAA+B;AAClCC,QAAAA,MAAM,EAAE,MAD0B;AAElCC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFyB;AAGlCC,QAAAA,IAAI,EAAE,gBAAe;AACnBC,UAAAA,SAAS,EAAE;AACTX,YAAAA,IAAI,EAAEA,IAAI,GAAGY,MAAM,CAACZ,IAAD,CAAT,GAAkB,IADnB;AAETa,YAAAA,IAAI,EAAEX,QAAQ,CAACW,IAAT,IAAiBjB,KAAK,CAACiB;AAFpB,WADQ;AAKnBhB,UAAAA,KAAK,EAALA;AALmB,SAAf;AAH4B,OAA/B,CAAL,CAWGiB,IAXH,CAWQ,UAAAC,GAAG;AAAA,eAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,OAXX,EAYGF,IAZH,CAYQ,UAAAC,GAAG,EAAI;AACX,YAAIA,GAAG,CAACE,MAAR,EAAgBd,MAAM,CAACY,GAAG,CAACE,MAAJ,CAAW,CAAX,CAAD,CAAN,CAAhB,KACK5B,KAAK,CAAC6B,GAAN,CAAUtB,KAAK,CAACiB,IAAhB,EAAsBE,GAAG,CAACI,IAA1B,KAAmClB,OAAO,CAACc,GAAD,CAA1C;AACN,OAfH,EAgBGK,KAhBH,CAgBS,UAAAC,GAAG,EAAI;AACZlB,QAAAA,MAAM,CAACkB,GAAD,CAAN;AACD,OAlBH;AAmBD,KApBM,CAAP;AAqBD,GAzBD,MAyBO,IAAIvB,aAAa,KAAK,QAAtB,EAAgC;AACrC,WAAO,aAAY,UAACG,OAAD,EAAUE,MAAV,EAAqB;AACtC,UAAMmB,SAAS,GAAG9B,OAAO,CAACI,KAAK,CAACiB,IAAN,CAAWU,OAAX,CAAmB9B,EAAnB,EAAuB,GAAvB,CAAD,CAAzB;AACA,UAAM+B,QAAQ,GAAG,CAACF,SAAD,GAAa,aAAb,cAAiCA,SAAjC,UAAjB;AAEA;AAAO;AAAP,gBAA0CG,iBAA1C,SAA8DD,QAA9D,GACGV,IADH,CACQ,UAAAC,GAAG,EAAI;AACX,YAAIA,GAAG,CAACE,MAAR,EAAgBd,MAAM,CAACY,GAAG,CAACE,MAAJ,CAAW,CAAX,CAAD,CAAN,CAAhB,KACK5B,KAAK,CAAC6B,GAAN,CAAUtB,KAAK,CAACiB,IAAhB,EAAsBE,GAAG,CAACI,IAA1B,KAAmClB,OAAO,CAACc,GAAD,CAA1C;AACN,OAJH,EAKGK,KALH,CAKS,UAAAC,GAAG,EAAI;AACZlB,QAAAA,MAAM,CAACkB,GAAD,CAAN;AACD,OAPH;AAQD,KAZM,CAAP;AAaD;AACF,CAzCD","sourcesContent":["/* global GRIDSOME_MODE, GRIDSOME_DATA_DIR */\n\nimport cache from './cache'\nimport router from '../router'\nimport config from '~/.temp/config.js'\nimport { unslash } from '../utils/helpers'\n\nconst re = new RegExp(`^${config.pathPrefix}`)\n\nexport default (route, query) => {\n  if (GRIDSOME_MODE === 'serve') {\n    const { page, ...params } = route.params\n    const { location } = router.resolve({ ...route, params })\n\n    return new Promise((resolve, reject) => {\n      fetch(process.env.GRAPHQL_ENDPOINT, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({\n          variables: {\n            page: page ? Number(page) : null,\n            path: location.path || route.path\n          },\n          query\n        })\n      })\n        .then(res => res.json())\n        .then(res => {\n          if (res.errors) reject(res.errors[0])\n          else cache.set(route.path, res.data) && resolve(res)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  } else if (GRIDSOME_MODE === 'static') {\n    return new Promise((resolve, reject) => {\n      const routePath = unslash(route.path.replace(re, '/'))\n      const filename = !routePath ? '/index.json' : `/${routePath}.json`\n\n      import(/* webpackChunkName: \"data/\" */ `${GRIDSOME_DATA_DIR}${filename}`)\n        .then(res => {\n          if (res.errors) reject(res.errors[0])\n          else cache.set(route.path, res.data) && resolve(res)\n        })\n        .catch(err => {\n          reject(err)\n        })\n    })\n  }\n}\n"]}]}